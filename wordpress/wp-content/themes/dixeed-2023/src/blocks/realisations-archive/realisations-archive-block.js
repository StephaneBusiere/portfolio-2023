var loaderSvg =
   '<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg"  xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="108px" height="108px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">  <g transform="rotate(0 50 50)">    <rect x="47.5" y="24" rx="2.5" ry="3" width="5" height="12" fill="#3ac5e2">      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"></animate>    </rect>  </g>  <g transform="rotate(30 50 50)">    <rect x="47.5" y="24" rx="2.5" ry="3" width="5" height="12" fill="#3ac5e2">      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"></animate>    </rect>  </g>  <g transform="rotate(60 50 50)">    <rect x="47.5" y="24" rx="2.5" ry="3" width="5" height="12" fill="#3ac5e2">      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.75s" repeatCount="indefinite"></animate>    </rect>  </g>  <g transform="rotate(90 50 50)">    <rect x="47.5" y="24" rx="2.5" ry="3" width="5" height="12" fill="#3ac5e2">      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"></animate>    </rect>  </g>  <g transform="rotate(120 50 50)">    <rect x="47.5" y="24" rx="2.5" ry="3" width="5" height="12" fill="#3ac5e2">      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"></animate>    </rect>  </g>  <g transform="rotate(150 50 50)">    <rect x="47.5" y="24" rx="2.5" ry="3" width="5" height="12" fill="#3ac5e2">      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.5s" repeatCount="indefinite"></animate>    </rect>  </g>  <g transform="rotate(180 50 50)">    <rect x="47.5" y="24" rx="2.5" ry="3" width="5" height="12" fill="#3ac5e2">      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"></animate>    </rect>  </g>  <g transform="rotate(210 50 50)">    <rect x="47.5" y="24" rx="2.5" ry="3" width="5" height="12" fill="#3ac5e2">      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"></animate>    </rect>  </g>  <g transform="rotate(240 50 50)">    <rect x="47.5" y="24" rx="2.5" ry="3" width="5" height="12" fill="#3ac5e2">      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.25s" repeatCount="indefinite"></animate>    </rect>  </g>  <g transform="rotate(270 50 50)">    <rect x="47.5" y="24" rx="2.5" ry="3" width="5" height="12" fill="#3ac5e2">      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"></animate>    </rect>  </g>  <g transform="rotate(300 50 50)">    <rect x="47.5" y="24" rx="2.5" ry="3" width="5" height="12" fill="#3ac5e2">      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"></animate>    </rect>  </g>  <g transform="rotate(330 50 50)">    <rect x="47.5" y="24" rx="2.5" ry="3" width="5" height="12" fill="#3ac5e2">      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animate>    </rect>  </g>  <!-- [ldio] generated by https://loading.io/ --></svg>';

jQuery(function($) {
var loader_container      = $(".loader-container");
var filters = $('.filter-container').find('.filter-item');
var filter_all = $('.filter-item.all');

loader_container.append(loaderSvg);
	filters.each(function () {
		var current = $(this);
		
		$(this).on("click", function (event) {
			if (event.target !== this) {
				return;
			}
			$(this).addClass("active");
			filter_all.addClass('stop');
		});
		$(document).on("click", function (e) {
			if (!current.is(e.target) && current.has(e.target).length === 0) {
				current.removeClass("active");
				
			}
		});
		filter_all.on("click", function (event) {
			filter_all.removeClass('stop');
		});
	})


$(document).on("click", ".filter-item", function (e) {
	e.preventDefault();
	var category = $(this).data("category");
	var realisation_wrapper   = $('.realisations-wrapper');
	var realisation_container = $('.realisations-container');
	var loader_container      = $(".loader-container");

	loader_container.addClass("active");
	realisation_container.addClass("fade");

	jQuery.ajax({
	   url: ajax_url,
	   type: "POST",
	   data: {
		  action: "archive_filters",
		  category: category,
	   },

	   success: function (result) {
		  $(".realisations-wrapper").html(result);
		  loader_container.removeClass("active");
		  realisation_container.removeClass("fade");
		  
	   },
	   error: function (result) {
		  console.warn(result);
	   },
	});
	
 });

 $(document).on("click", ".filter-item.all", function (e) {
	e.preventDefault();
	var category = $(this).data("category");
	var realisation_wrapper   = $('.realisations-wrapper');
	var realisation_container = $('.realisations-container');
	var loader_container      = $(".loader-container");

	loader_container.addClass("active");
	realisation_container.addClass("fade");

	
	jQuery.ajax({
	   url: ajax_url,
	   type: "POST",
	   data: {
		  action: "filter_all",
		  category: category,
	   },

	   success: function (result) {
		  $(".realisations-wrapper").html(result);
		  loader_container.removeClass("active");
		  realisation_container.removeClass("fade");
	   },
	   error: function (result) {
		  console.warn(result);
	   },
	});
 });
});